System information Have I written custom code opposed using stock example script provided TensorFlow OS Platform Distribution Linux Ubuntu TensorFlow installed source binary bynary tensorflow gpu TensorFlow version use command b v g da Python version Python CUDA cuDNN version CUDA GPU model memory NVIDIA GTX Describe current behavior trying optimize tensorflow model tensort optimization using example object detection given https github com tensorflow tensorrt tree master tftrt examples object detection So tensorflow model loads perfect I try optimize segmentation fault raise Describe expected behavior Code reproduce issue tf Graph default tf graph tf Session config tf config tf sess frozen graph trt create inference graph input graph def frozen graph outputs output names max batch size max batch size max workspace size bytes max workspace size bytes precision mode precision mode minimum segment size minimum segment size dynamic op True maximum cached engines maximum cached engines So segmentation fault occurs trt create create interference graph Other info logs This log python output I tensorflow core common runtime gpu gpu device cc Adding visible gpu devices I tensorflow core common runtime gpu gpu device cc Device interconnect StreamExecutor strength edge matrix I tensorflow core common runtime gpu gpu device cc I tensorflow core common runtime gpu gpu device cc N I tensorflow core common runtime gpu gpu device cc Created TensorFlow device job localhost replica task device GPU MB memory physical GPU device name GeForce GTX GB pci bus id compute capability INFO tensorflow Running TensorRT version INFO tensorflow Running TensorRT version I tensorflow core grappler devices cc Number eligible GPUs core count I tensorflow core grappler clusters single machine cc Starting new session I tensorflow core common runtime gpu gpu device cc Adding visible gpu devices I tensorflow core common runtime gpu gpu device cc Device interconnect StreamExecutor strength edge matrix I tensorflow core common runtime gpu gpu device cc I tensorflow core common runtime gpu gpu device cc N I tensorflow core common runtime gpu gpu device cc Created TensorFlow device job localhost replica task device GPU MB memory physical GPU device name GeForce GTX GB pci bus id compute capability I tensorflow contrib tensorrt segment segment cc There ops different types graph converted TensorRT Fill Switch Range TopKV ConcatV Identity Squeeze Transpose Const Unpack ResizeBilinear Reshape Mul Slice Merge Split Where ExpandDims NonMaxSuppressionV GatherV Cast Greater Minimum Sub ZerosLike Pack Exp Placeholder Add Shape NoOp StridedSlice For information see https docs nvidia com deeplearning dgx integrate tf trt index html support ops I tensorflow contrib tensorrt convert convert graph cc Number TensorRT candidate segments I tensorflow contrib tensorrt convert convert graph cc TensorRT node TRTEngineOp added segment consisting nodes succeeded Segmentation fault core dumped And callstack gdb I tensorflow contrib tensorrt convert convert graph cc TensorRT node TRTEngineOp added segment consisting nodes succeeded Thread python received signal SIGSEGV Segmentation fault x fff tensorflow tensorrt convert GetDeviceAndAllocator tensorflow tensorrt convert ConversionParams const tensorflow tensorrt convert EngineInfo const usr local lib python dist packages tensorflow contrib tensorrt wrap conversion gdb bt x fff tensorflow tensorrt convert GetDeviceAndAllocator tensorflow tensorrt convert ConversionParams const tensorflow tensorrt convert EngineInfo const usr local lib python dist packages tensorflow contrib tensorrt wrap conversion x fff aa tensorflow tensorrt convert ConvertAfterShapes tensorflow tensorrt convert ConversionParams usr local lib python dist packages tensorflow contrib tensorrt wrap conversion x fff f tensorflow tensorrt convert TRTOptimizationPass Optimize tensorflow grappler Cluster tensorflow grappler GrapplerItem const tensorflow GraphDef usr local lib python dist packages tensorflow contrib tensorrt wrap conversion x fffb ee tensorflow grappler MetaOptimizer RunOptimizer tensorflow grappler GraphOptimizer tensorflow grappler Cluster tensorflow grappler GrapplerItem tensorflow GraphDef tensorflow grappler MetaOptimizer GraphOptimizationResult usr local lib python dist packages tensorflow python pywrap tensorflow internal x fffb b tensorflow grappler MetaOptimizer OptimizeGraph tensorflow grappler Cluster tensorflow grappler GrapplerItem const tensorflow GraphDef usr local lib python dist packages tensorflow python pywrap tensorflow internal x fffb c tensorflow grappler MetaOptimizer Optimize tensorflow grappler Cluster tensorflow grappler GrapplerItem const tensorflow GraphDef usr local lib python dist packages tensorflow python pywrap tensorflow internal x fffb ab c TF OptimizeGraph GCluster tensorflow ConfigProto const tensorflow MetaGraphDef const bool std string const TF Status usr local lib python dist packages tensorflow python pywrap tensorflow internal x fffb wrap TF OptimizeGraph usr local lib python dist packages tensorflow python pywrap tensorflow internal x f x PyEval EvalFrameDefault x c x x f x PyEval EvalFrameDefault x c x x f x PyEval EvalFrameDefault x c x x f x PyEval EvalFrameDefault x c x PyEval EvalCode x x c x cd PyRun InteractiveLoopFlags x b PyRun AnyFileExFlags x Py Main x f main System information Have I written custom code opposed using stock example script provided TensorFlow No OS Platform Distribution Linux Ubuntu TensorFlow installed source binary source TensorFlow version use command Python version Bazel version compiling source NA CUDA cuDNN version No gpu GPU model memory No gpu Describe current behavior I following script using I able successfully convert deeplabv mnv pascal train pb model https drive google com file xKI SIrXB Wl SBuX D otI nuHjza view tflite format script follows tflite convert output file test lite graph def file deeplabv mnv pascal tain pb input arrays ImageTensor output arrays SemanticPredictions input shapes inference input type QUANTIZED UINT inference type FLOAT mean values std dev values I obtained input arrays output arrays deeplabv mnv pascal train pb using following python script import tensorflow tf gf tf GraphDef file open deeplabv mnv pascal tain pb rb gf ParseFromString file read We get names nodes n gf node print n name To get tensor tensor n op I planning apply steps towards custom trained model convert tflite format My model https drive google com file YUoayPHOqnkd PR QVBS Vzk b r p view I used python script get input arrays output arrays ran following tflite convert output file test lite graph def file graph pb input arrays Const output arrays detection masks input shapes inference input type QUANTIZED UINT inference type FLOAT mean values std dev values I getting following error I tensorflow core platform cpu feature guard cc Your CPU supports instructions TensorFlow binary compiled use AVX FMA Traceback recent call last File home ajinkya local lib python site packages tensorflow python framework ops py line set shape unknown shape tensorflow python framework errors impl InvalidArgumentError Shapes must equal rank During handling exception another exception occurred Traceback recent call last File home ajinkya local bin tflite convert line module sys exit main File home ajinkya local lib python site packages tensorflow contrib lite python tflite convert py line main app run main run main argv sys argv File home ajinkya local lib python site packages tensorflow python platform app py line run sys exit main argv File home ajinkya local lib python site packages tensorflow contrib lite python tflite convert py line run main convert model tflite flags File home ajinkya local lib python site packages tensorflow contrib lite python tflite convert py line convert model converter get toco converter flags File home ajinkya local lib python site packages tensorflow contrib lite python tflite convert py line get toco converter return converter fn converter kwargs File home ajinkya local lib python site packages tensorflow contrib lite python lite py line frozen graph set tensor shapes input tensors input shapes File home ajinkya local lib python site packages tensorflow contrib lite python convert saved model py line set tensor shapes tensor set shape shape File home ajinkya local lib python site packages tensorflow python framework ops py line set shape raise ValueError str e ValueError Shapes must equal rank How I resolve error em Please make sure bug As per GitHub Policy https github com tensorflow tensorflow blob master ISSUES md address code doc bugs performance issues feature requests build installation issues GitHub tag bug template em System information OS Platform Distribution e g Linux Ubuntu Linux Ubuntu LTS TensorFlow installed source binary pip TensorFlow version use command Python version Describe current behavior I testing tensorflow distributed machine I opened two separate shells created cluster using python import tensorflow tf cluster tf train ClusterSpec { local localhost localhost } server tf train Server cluster job name local task index shell python import tensorflow tf cluster tf train ClusterSpec { local localhost localhost } server tf train Server cluster job name local task index shell On shell I ran python import tensorflow tf import numpy np def add b return + b NUM ones np ones NUM graph tf Graph graph default va tf Variable ones vb tf Variable ones tf device job local task inputs va vb tf py function add inputs tf float tf Session grpc localhost graph graph sess sess run tf global variables initializer print sess run va vb print sess run returns error InternalError see traceback expected py func return Tensor backed memory job local replica task device CPU actually job localhost replica task device CPU This bug happen I replace tf py function code tf py func Describe expected behavior Code run successfully like using tf py func print arrays array array array This one ToDo items file 