em Please make sure bug As per GitHub Policy https github com tensorflow tensorflow blob master ISSUES md address code doc bugs performance issues feature requests build installation issues GitHub tag bug template em System information Have I written custom code opposed using stock example script provided TensorFlow + No OS Platform Distribution e g Linux Ubuntu + Ubuntu Mobile device e g iPhone Pixel Samsung Galaxy issue happens mobile device + NA TensorFlow installed source binary + Binary TensorFlow version use command + Tensorflow v g da Python version + Python Bazel version compiling source + NA GCC Compiler version compiling source + GCC CUDA cuDNN version + CUDA v GPU model memory + GTX Mobile Gb Describe current behavior Installation Keras source fails following Running commands per Keras installation instructions virtual environment sudo python setup py install File tmp easy install vOk scipy setup py line author email francois chollet gmail com RuntimeError Python version required Describe expected behavior Successful Keras installation Code reproduce issue + conda create n kerasenv python + conda activate kerasenv + pip install tensorflow + git clone https github com keras team keras git + cd keras + sudo python setup py install Other info logs + errorlog txt https github com tensorflow tensorflow files errorlog txt + Keras Issue https github com keras team keras issues em Please make sure bug As per GitHub Policy https github com tensorflow tensorflow blob master ISSUES md address code doc bugs performance issues feature requests build installation issues GitHub tag bug template em System information Have I written custom code opposed using stock example script provided TensorFlow No OS Platform Distribution e g Linux Ubuntu Jupyter notebook https colab research google com Mobile device e g iPhone Pixel Samsung Galaxy issue happens mobile device NA TensorFlow installed source binary Stock https colab research google com TensorFlow version use command b v g e b e Python version Bazel version compiling source NA GCC Compiler version compiling source NA CUDA cuDNN version NA GPU model memory NA You collect information using environment capture script https github com tensorflow tensorflow tree master tools tf env collect sh You also obtain TensorFlow version TF python c import tensorflow tf print tf GIT VERSION tf VERSION TF python c import tensorflow tf print tf version GIT VERSION tf version VERSION Describe current behavior The random seed set via tf set random seed seed set context functions passed tf data Dataset map invoked Even single thread case Describe expected behavior The random seed set via tf set random seed seed set context functions passed tf data Dataset map invoked least single thread case Code reproduce issue python import tensorflow tf def seed assert elt seed tf get default graph seed print Seed {} format seed assert seed None Random seed set Random graph operations added mapping reproducible return elt seed tf set random seed seed ds tf data Dataset generator lambda yield tf int seed assert None ds map seed assert Can run Seed Dataset Map ipynb https colab research google com drive SIGhYzOKc Sg DiB NFz lXKym mto scrollTo ENwL Bo BYw Other info logs I originally saw issue locally able reproduce Jupyter notebook provided Google Here log errors I see running code python Seed Seed None AssertionError Traceback recent call last ipython input ee e module seed assert None ds map seed assert frames ipython input ee e seed assert elt seed tf get default graph seed print Seed {} format seed assert seed None Random seed set Random graph operations added mapping reproducible return elt AssertionError Random seed set Random graph operations added mapping reproducible em Please make sure build installation issue As per GitHub Policy https github com tensorflow tensorflow blob master ISSUES md address code doc bugs performance issues feature requests build installation issues GitHub tag build template em System information OS Platform Distribution Linux Ubuntu Mobile device e g iPhone Pixel Samsung Galaxy issue happens mobile device N A TensorFlow installed source binary Source TensorFlow version TF Python version Installed using virtualenv pip conda conda Bazel version compiling source GCC Compiler version compiling source CUDA cuDNN version GPU model memory GTX GB Describe problem I trying build tensorflow source cuda I followed method used package I build always even config v flag Provide exact sequence commands steps executed running problem conda create n tf build pip python source activate tf build pip install upgrade force reinstall pip setuptools pip install wheel numpy scipy keras git clone https github com tensorflow tensorflow git single branch branch master cd tensorflow configure Use default values except CUDA support Y export TMP tmp bazel build c opt config opt config v copt march native cxxopt march native tensorflow tools pip package build pip package verbose failures bazel bin tensorflow tools pip package build pip package nightly flag tmp tensorflow pkg Any info logs Include logs source code would helpful diagnose problem If including tracebacks please include full traceback Large logs files attached creating package following log There errors compilation process warnings Tue May EDT Preparing sources dir tmp tmp C skAbFOnh ~ tfbuild tf build tensorflow ~ tfbuild tf build tensorflow ~ tfbuild tf build tensorflow Tue May EDT Building wheel warning files found matching pyd directory warning files found matching pd directory warning files found matching dylib directory warning files found matching dll directory warning files found matching lib directory warning files found matching csv directory warning files found matching h directory tensorflow include tensorflow warning files found matching directory tensorflow include Eigen warning files found matching h directory tensorflow include google warning files found matching directory tensorflow include third party warning files found matching directory tensorflow include unsupported Tue May EDT Output wheel file tmp tensorflow pkg System information OS Platform Distribution e g Linux Ubuntu Linux Ubuntu device TensorFlow installed source binary binary TensorFlow version use command Python version Bazel version compiling source GCC Compiler version compiling source CUDA cuDNN version GPU model memory Step Train keras model test OK saved model h model model Sequential model add SeparableConv D kernel size padding activation relu input shape input shape model add SeparableConv D kernel size padding activation relu model add MaxPooling D pool size model add SeparableConv D kernel size padding activation relu model add AveragePooling D pool size model add Flatten Step use tensorflowjs converter convert keras model JS model $ tensorflowjs converter input format keras model h assets generate files group shard model json Step use converted model JS project model await tf loadLayersModel model path get errors like core js ERROR Error Uncaught promise Error Fields kernelInitializer kernelRegularizer kernelConstraint invalid SeparableConv D Use depthwiseInitializer depthwiseRegularizer depthwiseConstraint pointwiseInitializer pointwiseRegularizer pointwiseConstraint instead Error Fields kernelInitializer kernelRegularizer kernelConstraint invalid SeparableConv D Use depthwiseInitializer depthwiseRegularizer depthwiseConstraint pointwiseInitializer pointwiseRegularizer pointwiseConstraint instead new tf layers esm js constructor tf layers esm js new tf layers esm js e fromConfig tf core esm js deserializeKerasObject tf layers esm js deserialize tf layers esm js fromConfig tf layers esm js deserializeKerasObject tf layers esm js deserialize tf layers esm js tf layers esm js resolvePromise zone js zone js rejected tslib es js ZoneDelegate push node modules zone js dist zone js ZoneDelegate invoke zone js Object onInvoke core js ZoneDelegate push node modules zone js dist zone js ZoneDelegate invoke zone js Zone push node modules zone js dist zone js Zone run zone js zone js ZoneDelegate push node modules zone js dist zone js ZoneDelegate invokeTask zone js Object onInvokeTask core js Note I replace SeparableConv D Conv D everything OK 